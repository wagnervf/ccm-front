# Funcionando OK
# Dentro da Pasta /home/wagner/Develop/projects/vue-node/backend
# Rodar -->    docker-compose -f docker-compose.yml up -d

# Ap√≥s as imagens serem criadas e iniciadas, entrar dentro do container do node
# docker exec -it e5c bash
# RUN npm install
# RUN npm install -g nodemon
# ** Melhorar o node.dockerfile para instalar as dependncias quando criar a imagem.

# Comando para acionar o servidor node
# docker exec -it e5c nodemon /home/node/app/bin



version: '3'

services:
  # mongo:
  #   image: mongo
  #   container_name: container_mongo
  #   restart: always
  #   environment:
  #     MONGO_INITDB_ROOT_USERNAME: root
  #     MONGO_INITDB_ROOT_PASSWORD: admin
  #   ports:
  #     - "27017:27017"
  #   volumes:
  #     - ./backend/volumes:/data/db
  #   networks:
  #     - rede_criacerto

  # mongo-express:
  #   image: mongo-express
  #   container_name: container_mongo_express
  #   restart: always
  #   ports:
  #     - 8081:8081
  #     - 5050:8081
  #   environment:    
  #     ME_CONFIG_MONGODB_PORT: 27017     
  #     ME_CONFIG_BASICAUTH_USERNAME: root
  #     ME_CONFIG_BASICAUTH_PASSWORD: admin
  #     ME_CONFIG_MONGODB_ADMINUSERNAME: root
  #     ME_CONFIG_MONGODB_ADMINPASSWORD: admin
  #     ME_CONFIG_MONGODB_URL: mongodb://127.0.0.1:27017/managerdb
  #   links:
  #     - mongo
  #   networks:
  #     - rede_criacerto
 
  
  # node:
  #   build:
  #     dockerfile: node.dockerfile
  #     context: .
  #   image: node:16.13-slim
  #   container_name: container_node
  #   #environment:
  #   #   - DB_URI=mongodb://mongodb:27017/manager
  #   ports:
  #     - "3000:3000"
  #   volumes:
  #     - ./backend:/home/node/app
  #   links: 
  #     - mongo
  #   networks:
  #     - rede_criacerto

  vue:
    build:
      dockerfile: vue.dockerfile
      context: .
    image: node:16.13-slim
    container_name: container_vue
    ports:
      - "8080:8080"
    volumes:
      - ./front:/home/node/app

    command: 'npm run serve'  

  #  links: 
  #    - node
    networks:
      - rede_criacerto

networks: 
    rede_criacerto:
      driver: bridge